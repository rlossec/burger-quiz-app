%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#ff6b35', 'primaryTextColor': '#fff', 'primaryBorderColor': '#c44d34', 'lineColor': '#2d3436', 'secondaryColor': '#fdcb6e', 'tertiaryColor': '#dfe6e9'}}}%%
classDiagram

    %% ========== MODÈLES QUIZ (CONTENU) ==========

    class Question {
        +UUID id
        +string text
        +CharField question_type
        +bool original
        +string explanations
        +URL video_url
        +URL image_url
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class Answer {
        +UUID id
        +Question question
        +string text
        +bool is_correct
        +Image image
    }

    class BurgerQuiz {
        +UUID id
        +string title
        +string toss
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class Nuggets {
        +UUID id
        +string title
        +bool original
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class SaltOrPepper {
        +UUID id
        +string title
        +string description
        +bool original
        +JSON choice_labels
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class Addition {
        +UUID id
        +string title
        +string description
        +bool original
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class DeadlyBurger {
        +UUID id
        +string title
        +bool original
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class MenuTheme {
        +UUID id
        +string title
        +CharField type
        +bool original
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class Menus {
        +UUID id
        +string title
        +string description
        +bool original
        +User author
        +TaggableManager tags
        +datetime created_at
        +datetime updated_at
    }

    class Tag {
        <<taggit>>
        +int id
        +string name
        +string slug
    }

    class TaggedItem {
        <<taggit - through>>
        +int id
        +Tag tag
        +ContentType content_type
        +int object_id
    }

    class NuggetQuestion {
        <<through>>
        +int order
    }
    class SaltOrPepperQuestion {
        <<through>>
        +int order
    }
    class MenuThemeQuestion {
        <<through>>
        +int order
    }
    class AdditionQuestion {
        <<through>>
        +int order
    }
    class DeadlyBurgerQuestion {
        <<through>>
        +int order
    }

    %% ========== MODÈLES SESSION / JEU ==========

    class Session {
        +UUID id
        +datetime started_at
        +datetime ended_at
        +string status
        +string code
    }

    class Participant {
        +UUID id
        +string nickname
        +int score
        +string team
    }

    class QuestionUsage {
        +UUID id
        +datetime used_at
    }

    class User {
        <<accounts>>
        +UUID id
        +string email
        +string username
    }

    %% ========== RELATIONS QUIZ ==========

    Question "1" --> "*" Answer : answers
    Question "*" --> "0..1" User : author
    Question "*" ..> "*" Tag : tags

    BurgerQuiz "1" --> "0..1" Nuggets
    BurgerQuiz "1" --> "0..1" SaltOrPepper
    BurgerQuiz "1" --> "0..1" Menus
    BurgerQuiz "1" --> "0..1" Addition
    BurgerQuiz "1" --> "0..1" DeadlyBurger
    BurgerQuiz "*" --> "0..1" User : author
    BurgerQuiz "*" ..> "*" Tag : tags

    Nuggets "1" --> "*" NuggetQuestion
    Nuggets "*" --> "0..1" User : author
    Nuggets "*" ..> "*" Tag : tags
    NuggetQuestion "*" --> "1" Question

    SaltOrPepper "1" --> "*" SaltOrPepperQuestion
    SaltOrPepper "*" --> "0..1" User : author
    SaltOrPepper "*" ..> "*" Tag : tags
    SaltOrPepperQuestion "*" --> "1" Question

    MenuTheme "1" --> "*" MenuThemeQuestion
    MenuTheme "*" --> "0..1" User : author
    MenuTheme "*" ..> "*" Tag : tags
    MenuThemeQuestion "*" --> "1" Question

    Addition "1" --> "*" AdditionQuestion
    Addition "*" --> "0..1" User : author
    Addition "*" ..> "*" Tag : tags
    AdditionQuestion "*" --> "1" Question

    DeadlyBurger "1" --> "*" DeadlyBurgerQuestion
    DeadlyBurger "*" --> "0..1" User : author
    DeadlyBurger "*" ..> "*" Tag : tags
    DeadlyBurgerQuestion "*" --> "1" Question

    Menus "1" --> "0..1" MenuTheme : menu_1
    Menus "1" --> "0..1" MenuTheme : menu_2
    Menus "1" --> "0..1" MenuTheme : menu_troll
    Menus "*" --> "0..1" User : author
    Menus "*" ..> "*" Tag : tags

    Tag "1" --> "*" TaggedItem
    TaggedItem "*" ..> "1" Question : via GenericFK
    TaggedItem "*" ..> "1" BurgerQuiz : via GenericFK
    TaggedItem "*" ..> "1" Nuggets : via GenericFK

    %% ========== RELATIONS SESSION ==========

    Session "1" --> "1" BurgerQuiz : quiz
    Session "1" --> "*" Participant : participants

    Participant "0..1" --> "0..1" User : compte

    QuestionUsage "*" --> "1" Question
    QuestionUsage "*" --> "1" Session
    QuestionUsage "*" --> "0..1" Participant
